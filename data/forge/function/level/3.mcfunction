execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"stamina"}}}]}] run data modify entity @s HandItems[0].components merge value {"minecraft:custom_data":{ForgeAttack:1},"minecraft:lore":['{"text":"§a能量 III"}','{"text":"§a攻擊後有60%機率回復1%體力"}']}
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"poison"}}}]}] run data modify entity @s HandItems[0].components merge value {"minecraft:custom_data":{ForgeAttack:1},"minecraft:lore":['{"text":"§a劇毒 III"}','{"text":"§a攻擊後有60%機率產生劇毒效果"}']}
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"glowing"}}}]}] run data modify entity @s HandItems[0].components merge value {"minecraft:custom_data":{ForgeAttack:1},"minecraft:lore":['{"text":"§a發光 III"}','{"text":"§a攻擊後有60%機率產生發光效果"}']}
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"leeching"}}}]}] run data modify entity @s HandItems[0].components merge value {"minecraft:custom_data":{ForgeAttack:1},"minecraft:lore":['{"text":"§a吸血 III"}','{"text":"§a攻擊後有60%機率獲得立即治療效果"}']}
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"hunger"}}}]}] run data modify entity @s HandItems[0].components merge value {"minecraft:custom_data":{ForgeAttack:1},"minecraft:lore":['{"text":"§a飢餓 III"}','{"text":"§a攻擊後有60%機率產生飢餓效果"}']}
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"weakness"}}}]}] run data modify entity @s HandItems[0].components merge value {"minecraft:custom_data":{ForgeAttack:1},"minecraft:lore":['{"text":"§a虛弱 III"}','{"text":"§a攻擊後有60%機率產生虛弱效果"}']}
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"wither"}}}]}] run data modify entity @s HandItems[0].components merge value {"minecraft:custom_data":{ForgeAttack:1},"minecraft:lore":['{"text":"§a凋零 III"}','{"text":"§a攻擊後有60%機率產生凋零效果"}']}
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"chain"}}}]}] run data modify entity @s HandItems[0].components merge value {"minecraft:custom_data":{ForgeAttack:1},"minecraft:lore":['{"text":"§a連鎖 III"}','{"text":"§a攻擊後有60%機率對附近敵人造成傷害"}']}
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"critical"}}}]}] run data modify entity @s HandItems[0].components merge value {"minecraft:custom_data":{ForgeAttack:1},"minecraft:lore":['{"text":"§a重擊 III"}','{"text":"§a攻擊後有60%機率造成額外傷害"}']}
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"stunning"}}}]}] run data modify entity @s HandItems[0].components merge value {"minecraft:custom_data":{ForgeAttack:1},"minecraft:lore":['{"text":"§a震懾 III"}','{"text":"§a攻擊後有60%機率產生緩速效果"}']}
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"gravity"}}}]}] run data modify entity @s HandItems[0].components merge value {"minecraft:custom_data":{ForgeAttack:1},"minecraft:lore":['{"text":"§a引力 III"}','{"text":"§a攻擊後有60%機率將敵人拉過來"}']}
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"explode"}}}]}] run data modify entity @s HandItems[0].components merge value {"minecraft:custom_data":{ForgeAttack:1},"minecraft:lore":['{"text":"§a爆破 III"}','{"text":"§a殺死玩家後有75%機率召喚TNT"}']}
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"rampaging"}}}]}] run data modify entity @s HandItems[0].components merge value {"minecraft:custom_data":{ForgeAttack:1},"minecraft:lore":['{"text":"§a肆虐 III"}','{"text":"§a殺死玩家後有75%機率獲得力量效果"}']}
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"soul"}}}]}] run data modify entity @s HandItems[0].components merge value {"minecraft:custom_data":{ForgeAttack:1},"minecraft:lore":['{"text":"§a招魂 III"}','{"text":"§a殺死玩家後有75%機率吸收1個靈魂"}']}
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"looting"}}}]}] run data modify entity @s HandItems[0].components merge value {"minecraft:custom_data":{ForgeAttack:1},"minecraft:lore":['{"text":"§a聚寶 III"}','{"text":"§a殺死玩家後有75%機率掉落隨機物品"}']}
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"slash"}}}]}] run data modify entity @s HandItems[0].components merge value {"minecraft:lore":['{"text":"§a速斬 III"}','{"text":"§a拿在主手增加1.5攻擊速度"}']}
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"slash"}}}]}] store result score 攻擊速度 forge run data get entity @s HandItems[0].components.minecraft:attribute_modifiers.modifiers[{type:"minecraft:generic.attack_speed"}].amount 10
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"slash"}}}]}] run scoreboard players add 攻擊速度 forge 5
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"slash"}}}]}] store result entity @s HandItems[0].components.minecraft:attribute_modifiers.modifiers[{type:"minecraft:generic.attack_speed"}].amount double 0.1 run scoreboard players get 攻擊速度 forge
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"health"}}}]}] run data modify entity @s HandItems[0].components merge value {"minecraft:lore":['{"text":"§a延壽 III"}','{"text":"§a拿在主手增加75%生命值"}']}
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"health"}}}]}] run data modify entity @s HandItems[0].components.minecraft:attribute_modifiers.modifiers[{type:"minecraft:generic.max_health"}].amount set value 0.75
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"defense"}}}]}] run data modify entity @s HandItems[0].components merge value {"minecraft:lore":['{"text":"§a防禦 III"}','{"text":"§a拿在主手增加6防禦值"}']}
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"defense"}}}]}] run data modify entity @s HandItems[0].components.minecraft:attribute_modifiers.modifiers[{type:"minecraft:generic.armor"}].amount set value 6
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"sharpness"}}}]}] run data modify entity @s HandItems[0].components merge value {"minecraft:lore":['{"text":"§a鋒利 III"}','{"text":"§a拿在主手增加3攻擊傷害"}']}
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"sharpness"}}}]}] store result score 攻擊力 forge run data get entity @s HandItems[0].components.minecraft:attribute_modifiers.modifiers[{type:"minecraft:generic.attack_damage"}].amount
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"sharpness"}}}]}] run scoreboard players add 攻擊力 forge 1
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"sharpness"}}}]}] store result entity @s HandItems[0].components.minecraft:attribute_modifiers.modifiers[{type:"minecraft:generic.attack_damage"}].amount double 1 run scoreboard players get 攻擊力 forge
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"speed"}}}]}] run data modify entity @s HandItems[0].components merge value {"minecraft:lore":['{"text":"§a輕盈 III"}','{"text":"§a拿在主手增加40%移動速度"}']}
execute if entity @s[nbt={HandItems:[{components:{"minecraft:custom_data":{ForgeEffect:"speed"}}}]}] run data modify entity @s HandItems[0].components.minecraft:attribute_modifiers.modifiers[{type:"minecraft:generic.movement_speed"}].amount set value 0.4

data modify entity @s HandItems[0].components.minecraft:custom_data.forge set value 3
tag @s add forge_success
particle totem_of_undying ~ ~ ~ 0.3 0.3 0.3 0.3 25 force @a[distance=..3]
playsound block.beacon.power_select ambient @a[distance=..3] ~ ~ ~ 1 2