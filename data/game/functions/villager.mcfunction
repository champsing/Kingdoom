#---村民---
kill @e[type=villager,tag=shop,distance=..0.1]
kill @e[type=witch]

data merge entity @s {CustomName:"",CustomNameVisible:0b,Marker:1b,Invisible:1b,Invulnerable:1b}

execute at @s[tag=butcher] run summon villager ~ ~ ~ {DeathLootTable:"minecraft:empty",Tags:["Vbutcher","shop"],CustomName:'{"text":"屠夫"}',CustomNameVisible:1,VillagerData:{level:5,profession:"butcher",type:"plains"},Offers:{Recipes:[{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:1},sell:{id:"carrot",Count:3}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:1},sell:{id:"melon_slice",Count:3,tag:{display:{Lore:['{"text":"§7補充1%體力"}']}}}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:1},sell:{id:"cooked_beef",Count:1,tag:{display:{Lore:['{"text":"§7補充2%體力"}']}}}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:10},sell:{id:"golden_apple",Count:1,tag:{display:{Lore:['{"text":"§7補充5%體力"}']}}}}]},Invulnerable:1b,PersistenceRequired:1b,NoAI:1b,Silent:1b}

execute at @s[tag=fletcher] run summon villager ~ ~ ~ {DeathLootTable:"minecraft:empty",Tags:["Vfletcher","shop"],CustomName:'{"text":"製箭師"}',CustomNameVisible:1,VillagerData:{level:5,profession:"fletcher",type:"plains"},Offers:{Recipes:[{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:20},sell:{id:"bow",Count:1}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:30},sell:{id:"crossbow",Count:1}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:1},sell:{id:"arrow",Count:1}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:6},sell:{id:"tipped_arrow",Count:1,tag:{Potion:"poison"}}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:6},sell:{id:"tipped_arrow",Count:1,tag:{Potion:"harming"}}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:3},sell:{id:"spectral_arrow",Count:1}}]},Invulnerable:1b,PersistenceRequired:1b,NoAI:1b,Silent:1b}

execute at @s[tag=librarian] run summon villager ~ ~ ~ {DeathLootTable:"minecraft:empty",Tags:["Vlibrarian","shop"],CustomName:'{"text":"圖書管理員"}',CustomNameVisible:1,VillagerData:{level:5,profession:"librarian",type:"plains"},Offers:{Recipes:[{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:12},sell:{id:"bookshelf",Count:1}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:5},sell:{id:"book",Count:1}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:1},sell:{id:"lapis_lazuli",Count:1}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:5},sell:{id:"experience_bottle",Count:1}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:40},sell:{id:"written_book",Count:1,tag:{kit:"attack",pages:['["",{"text":"攻擊型技能書","bold":true,"color":"gold"},{"text":"\\n【","color":"reset"},{"text":"凍結","clickEvent":{"action":"run_command","value":"/trigger kit set 1"},"hoverEvent":{"action":"show_text","contents":"周圍5格內玩家獲得緩速 IV (0:07)"}},{"text":"】-冷卻時間: 150秒\\n【"},{"text":"咆哮","clickEvent":{"action":"run_command","value":"/trigger kit set 2"},"hoverEvent":{"action":"show_text","contents":"周圍5格內玩家獲得中毒 IV (0:07)"}},{"text":"】-冷卻時間: 150秒\\n【"},{"text":"燃獄","clickEvent":{"action":"run_command","value":"/trigger kit set 3"},"hoverEvent":{"action":"show_text","contents":"腳下生成火焰 (0:15)"}},{"text":"】-冷卻時間: 180秒\\n【"},{"text":"狂暴","clickEvent":{"action":"run_command","value":"/trigger kit set 4"},"hoverEvent":{"action":"show_text","contents":"獲得力量 II和發光 (0:08)"}},{"text":"】-冷卻時間: 180秒\\n【"},{"text":"飛拳","clickEvent":{"action":"run_command","value":"/trigger kit set 5"},"hoverEvent":{"action":"show_text","contents":"周圍5格內玩家擊飛上天"}},{"text":"】-冷卻時間: 180秒\\n【"},{"text":"標記","clickEvent":{"action":"run_command","value":"/trigger kit set 6"},"hoverEvent":{"action":"show_text","contents":"視角自動瞄準最靠近的敵人 (0:07)"}},{"text":"】-冷卻時間: 180秒\\n【"},{"text":"狙擊","clickEvent":{"action":"run_command","value":"/trigger kit set 7"},"hoverEvent":{"action":"show_text","contents":"射出無重力箭矢 (0:09)"}},{"text":"】-冷卻時間: 180秒\\n【"},{"text":"爆破","clickEvent":{"action":"run_command","value":"/trigger kit set 8"},"hoverEvent":{"action":"show_text","contents":"召喚一隻瞬間爆炸的苦力怕"}},{"text":"】-冷卻時間: 210秒\\n\\n【"},{"text":"重置攻擊型技能","clickEvent":{"action":"run_command","value":"/trigger kit set 9"},"hoverEvent":{"action":"show_text","contents":"重置技能後可再次學習"}},{"text":"】"}]'],author:"圖書管理員",title:"攻擊型技能書"}}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:40},sell:{id:"written_book",Count:1,tag:{kit:"defense",pages:['["",{"text":"防禦型技能書","bold":true,"color":"gold"},{"text":"\\n【","color":"reset"},{"text":"閃現","clickEvent":{"action":"run_command","value":"/trigger kit set 11"},"hoverEvent":{"action":"show_text","contents":"往前傳送七格"}},{"text":"】-冷卻時間: 150秒\\n【"},{"text":"淨化","clickEvent":{"action":"run_command","value":"/trigger kit set 12"},"hoverEvent":{"action":"show_text","contents":"清除所有負面效果"}},{"text":"】-冷卻時間: 150秒\\n【"},{"text":"治愈","clickEvent":{"action":"run_command","value":"/trigger kit set 13"},"hoverEvent":{"action":"show_text","contents":"獲得立即治療 II和回復 I (0:09)"}},{"text":"】-冷卻時間: 180秒\\n【"},{"text":"抗擊","clickEvent":{"action":"run_command","value":"/trigger kit set 14"},"hoverEvent":{"action":"show_text","contents":"無法被擊退 (0:15)"}},{"text":"】-冷卻時間: 180秒\\n【"},{"text":"潛行","clickEvent":{"action":"run_command","value":"/trigger kit set 15"},"hoverEvent":{"action":"show_text","contents":"清除發光效果和隱形 (0:15)"}},{"text":"】-冷卻時間: 180秒\\n【"},{"text":"除爆","clickEvent":{"action":"run_command","value":"/trigger kit set 16"},"hoverEvent":{"action":"show_text","contents":"清除周圍20格內爆破物 (0:07)"}},{"text":"】-冷卻時間: 180秒\\n【"},{"text":"無敵","clickEvent":{"action":"run_command","value":"/trigger kit set 17"},"hoverEvent":{"action":"show_text","contents":"獲得抗性 V (0:06)"}},{"text":"】-冷卻時間: 180秒\\n【"},{"text":"被動","clickEvent":{"action":"run_command","value":"/trigger kit set 18"},"hoverEvent":{"action":"show_text","contents":"獲得虛弱 X、抗性 V、緩速 I (0:11)"}},{"text":"】-冷卻時間: 210秒\\n\\n【"},{"text":"重置防禦型技能","clickEvent":{"action":"run_command","value":"/trigger kit set 19"},"hoverEvent":{"action":"show_text","contents":"重置技能後可再次學習"}},{"text":"】"}]'],author:"圖書管理員",title:"防禦型技能書"}}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:40},sell:{id:"written_book",Count:1,tag:{kit:"support",pages:['["",{"text":"支援型技能書","bold":true,"color":"gold"},{"text":"\\n【","color":"reset"},{"text":"詠唱","clickEvent":{"action":"run_command","value":"/trigger kit set 21"},"hoverEvent":{"action":"show_text","contents":"周圍10格內隊友獲得力量 I (0:05)"}},{"text":"】-冷卻時間: 150秒\\n【"},{"text":"吸收","clickEvent":{"action":"run_command","value":"/trigger kit set 22"},"hoverEvent":{"action":"show_text","contents":"把30格內所有掉落物吸過來"}},{"text":"】-冷卻時間: 150秒\\n【"},{"text":"天眼","clickEvent":{"action":"run_command","value":"/trigger kit set 23"},"hoverEvent":{"action":"show_text","contents":"敵隊發光 (1:30)"}},{"text":"】-冷卻時間: 180秒\\n【"},{"text":"漫步","clickEvent":{"action":"run_command","value":"/trigger kit set 24"},"hoverEvent":{"action":"show_text","contents":"腳下生成方塊 (0:08)"}},{"text":"】-冷卻時間: 180秒\\n【"},{"text":"召喚","clickEvent":{"action":"run_command","value":"/trigger kit set 25"},"hoverEvent":{"action":"show_text","contents":"召喚兩隻友方骷髏"}},{"text":"】-冷卻時間: 180秒\\n【"},{"text":"幸運","clickEvent":{"action":"run_command","value":"/trigger kit set 26"},"hoverEvent":{"action":"show_text","contents":"挖礦機率增加 (0:20)"}},{"text":"】-冷卻時間: 180秒\\n【"},{"text":"盜竊","clickEvent":{"action":"run_command","value":"/trigger kit set 27"},"hoverEvent":{"action":"show_text","contents":"偷最靠近的玩家20%的錢"}},{"text":"】-冷卻時間: 180秒\\n【"},{"text":"出竅","clickEvent":{"action":"run_command","value":"/trigger kit set 28"},"hoverEvent":{"action":"show_text","contents":"轉換成觀察模式 (0:10)"}},{"text":"】-冷卻時間: 210秒\\n\\n【"},{"text":"重置支援型技能","clickEvent":{"action":"run_command","value":"/trigger kit set 29"},"hoverEvent":{"action":"show_text","contents":"重置技能後可再次學習"}},{"text":"】"}]'],author:"圖書管理員",title:"支援型技能書"}}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:40},sell:{id:"written_book",Count:1,tag:{kit:"king",pages:['["",{"text":"國王技能書","bold":true,"color":"gold"},{"text":"\\n【","color":"reset"},{"text":"征稅","clickEvent":{"action":"run_command","value":"/trigger kit set 31"},"hoverEvent":{"action":"show_text","contents":"向所有人收取5%錢"}},{"text":"】-冷卻時間: 150秒\\n【"},{"text":"充能","clickEvent":{"action":"run_command","value":"/trigger kit set 32"},"hoverEvent":{"action":"show_text","contents":"另三個技能冷卻時間減半"}},{"text":"】-冷卻時間: 180秒\\n【"},{"text":"援兵","clickEvent":{"action":"run_command","value":"/trigger kit set 33"},"hoverEvent":{"action":"show_text","contents":"把隨機一位隊友傳送過來"}},{"text":"】-冷卻時間: 180秒\\n【"},{"text":"轉移","clickEvent":{"action":"run_command","value":"/trigger kit set 34"},"hoverEvent":{"action":"show_text","contents":"和20格內最靠近的敵人互換位置"}},{"text":"】-冷卻時間: 180秒\\n【"},{"text":"保衛","clickEvent":{"action":"run_command","value":"/trigger kit set 35"},"hoverEvent":{"action":"show_text","contents":"最靠近的建築物不被破壞 (1:00)"}},{"text":"】-冷卻時間: 180秒\\n【"},{"text":"馴服","clickEvent":{"action":"run_command","value":"/trigger kit set 36"},"hoverEvent":{"action":"show_text","contents":"召喚一隻馬"}},{"text":"】-冷卻時間: 210秒\\n\\n【"},{"text":"重置國王技能","clickEvent":{"action":"run_command","value":"/trigger kit set 37"},"hoverEvent":{"action":"show_text","contents":"重置技能後可再次學習"}},{"text":"】"}]'],author:"圖書管理員",title:"國王技能書"}}}]},Invulnerable:1b,PersistenceRequired:1b,NoAI:1b,Silent:1b}

execute at @s[tag=blacksmith] run summon villager ~ ~ ~ {DeathLootTable:"minecraft:empty",Tags:["Vblacksmith","shop"],CustomName:'{"text":"鍛造師"}',CustomNameVisible:1,VillagerData:{level:5,profession:"toolsmith",type:"plains"},Offers:{Recipes:[{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:5},sell:{id:"jukebox",Count:1,tag:{bag:"weapon",display:{Name:'{"text":"§f武器包"}'}}}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:5},sell:{id:"jukebox",Count:1,tag:{bag:"armor",display:{Name:'{"text":"§f盔甲包"}'}}}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:5},sell:{id:"jukebox",Count:1,tag:{bag:"tool",display:{Name:'{"text":"§f工具包"}'}}}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:20},sell:{id:"shield",Count:1}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:10},sell:{id:"ender_eye",tag:{display:{Name:'{"text":"§f鍛造石"}'}},Count:1}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:20},sell:{id:"ender_pearl",tag:{display:{Name:'{"text":"§f抽獎轉蛋"}',Lore:['{"text":"§7點擊右鍵開啟"}']}},Count:1}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:10},sell:{id:"anvil",Count:1}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:10},sell:{id:"grindstone",Count:1}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"cobblestone",Count:30},sell:{id:"emerald",Count:1}}]},Invulnerable:1b,PersistenceRequired:1b,NoAI:1b,Silent:1b}

execute at @s[tag=bomber] run summon villager ~ ~ ~ {DeathLootTable:"minecraft:empty",Tags:["Vbomber","shop"],CustomName:'{"text":"爆破兵"}',CustomNameVisible:1,VillagerData:{level:5,profession:"weaponsmith",type:"plains"},Offers:{Recipes:[{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:5},sell:{id:"egg",tag:{display:{Name:'{"text":"§f火焰彈"}',Lore:['{"text":"§7點擊右鍵扔出"}']}},Count:1}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:5},sell:{id:"lingering_potion",tag:{display:{Name:'{"text":"§f煙霧彈"}',Lore:['{"text":"§7點擊右鍵扔出"}']},CustomPotionEffects:[{Id:15,Amplifier:0,Duration:400,ShowParticles:0b}]},Count:1}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:10},sell:{id:"tnt",tag:{display:{Lore:['{"text":"§7點擊右鍵放置"}']}},Count:1}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:20},sell:{id:"armor_stand",tag:{display:{Name:'{"text":"§f地雷"}',Lore:['{"text":"§7對著地上點擊右鍵放置"}']},EntityTag:{NoGravity:1b,Invulnerable:1b,Invisible:1b,PersistenceRequired:1b,Tags:["landmine_point"]}},Count:1}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:15},sell:{id:"snowball",tag:{display:{Name:'{"text":"§f手榴彈"}',Lore:['{"text":"§7點擊右鍵扔出"}']}},Count:1}},{rewardExp:1b,maxUses:2147483647,uses:0,buy:{id:"emerald",Count:20},sell:{id:"splash_potion",tag:{display:{Name:'{"text":"§f閃光彈"}',Lore:['{"text":"§7點擊右鍵扔出"}']},CustomPotionEffects:[{Id:9,Amplifier:0,Duration:600},{Id:24,Amplifier:0,Duration:600}]},Count:1}}]},Invulnerable:1b,PersistenceRequired:1b,NoAI:1b,Silent:1b}

data modify entity @e[type=villager,tag=shop,limit=1,sort=nearest] Rotation set from entity @s Rotation