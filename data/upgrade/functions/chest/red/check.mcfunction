execute unless block ~ ~1 ~ red_shulker_box run function upgrade:chest/red/reset
execute if score 紅隊保險箱 team_upgrade matches 1 unless block ~ ~1 ~ red_shulker_box{Items:[{Slot:9b,id:"minecraft:barrier",Count:1b},{Slot:10b,id:"minecraft:barrier",Count:1b},{Slot:11b,id:"minecraft:barrier",Count:1b},{Slot:12b,id:"minecraft:barrier",Count:1b},{Slot:13b,id:"minecraft:barrier",Count:1b},{Slot:14b,id:"minecraft:barrier",Count:1b},{Slot:15b,id:"minecraft:barrier",Count:1b},{Slot:16b,id:"minecraft:barrier",Count:1b},{Slot:17b,id:"minecraft:barrier",Count:1b},{Slot:18b,id:"minecraft:barrier",Count:1b},{Slot:19b,id:"minecraft:barrier",Count:1b},{Slot:20b,id:"minecraft:barrier",Count:1b},{Slot:21b,id:"minecraft:barrier",Count:1b},{Slot:22b,id:"minecraft:barrier",Count:1b},{Slot:23b,id:"minecraft:barrier",Count:1b},{Slot:24b,id:"minecraft:barrier",Count:1b},{Slot:25b,id:"minecraft:barrier",Count:1b},{Slot:26b,id:"minecraft:barrier",Count:1b}]} run function upgrade:chest/lock/1
execute if score 紅隊保險箱 team_upgrade matches 2 unless block ~ ~1 ~ red_shulker_box{Items:[{Slot:18b,id:"minecraft:barrier",Count:1b},{Slot:19b,id:"minecraft:barrier",Count:1b},{Slot:20b,id:"minecraft:barrier",Count:1b},{Slot:21b,id:"minecraft:barrier",Count:1b},{Slot:22b,id:"minecraft:barrier",Count:1b},{Slot:23b,id:"minecraft:barrier",Count:1b},{Slot:24b,id:"minecraft:barrier",Count:1b},{Slot:25b,id:"minecraft:barrier",Count:1b},{Slot:26b,id:"minecraft:barrier",Count:1b}]} run function upgrade:chest/lock/2
data modify storage chest:red Items set from block ~ ~1 ~ Items
clear @a[team=blue] blaze_rod{lock:"red"}
kill @e[type=item,nbt={Item:{id:"minecraft:blaze_rod",tag:{lock:"red"}}}]
execute as @a[team=red] store success score @s upgrade_lock run clear @s blaze_rod{lock:"red"} 0
give @a[team=red,scores={upgrade_lock=0}] blaze_rod{upgrade:2,lock:"red",display:{Name:'{"text":"§c紅隊保險箱鑰匙"}'}}