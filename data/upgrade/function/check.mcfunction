execute store success score @s item_upgrade run clear @s #upgrade:item[custom_data~{upgrade:1}] 0
execute if score @s item_upgrade matches 1 at @s run function upgrade:use

clear @s light_gray_stained_glass_pane
kill @e[type=item,nbt={Item:{components:{"minecraft:custom_data":{upgrade:1}}}}]
setblock ~ ~ ~ dispenser[facing=down]{CustomName:{"text":"升級台"}}
data merge block ~ ~ ~ {Items:[{Slot:0b,id:"minecraft:diamond_chestplate",count:1b,components:{"minecraft:custom_name":{"text":"升級裝備","italic":false,"color":"gold"},"minecraft:lore":[{"text":"第一級: 皮革裝備 10元","italic":false,"color":"gray"},{"text":"第二級: 鎖鏈裝備 20元","italic":false,"color":"gray"},{"text":"第三級: 鐵製裝備 30元","italic":false,"color":"gray"}],"minecraft:custom_data":{upgrade:1}}},{Slot:1b,id:"minecraft:diamond_sword",count:1b,components:{"minecraft:custom_name":{"text":"升級劍","italic":false,"color":"gold"},"minecraft:lore":[{"text":"第一級: 石劍 10元","italic":false,"color":"gray"},{"text":"第二級: 鐵劍 20元","italic":false,"color":"gray"},{"text":"第三級: 鑽石劍 30元","italic":false,"color":"gray"}],"minecraft:custom_data":{upgrade:1}}},{Slot:2b,id:"minecraft:diamond_axe",count:1b,components:{"minecraft:custom_name":{"text":"升級斧","italic":false,"color":"gold"},"minecraft:lore":[{"text":"第一級: 石斧 10元","italic":false,"color":"gray"},{"text":"第二級: 鐵斧 20元","italic":false,"color":"gray"},{"text":"第三級: 鑽石斧 30元","italic":false,"color":"gray"}],"minecraft:custom_data":{upgrade:1}}},{Slot:3b,id:"minecraft:diamond_pickaxe",count:1b,components:{"minecraft:custom_name":{"text":"升級鎬","italic":false,"color":"gold"},"minecraft:lore":[{"text":"第一級: 鐵鎬 10元","italic":false,"color":"gray"},{"text":"第二級: 鑽石鎬 20元","italic":false,"color":"gray"},{"text":"第三級: 獄髓鎬 30元","italic":false,"color":"gray"}],"minecraft:custom_data":{upgrade:1}}},{Slot:4b,id:"minecraft:light_gray_stained_glass_pane",count:1b,components:{"minecraft:custom_name":{"text":" "},"minecraft:custom_data":{upgrade:1}}},{Slot:5b,id:"minecraft:anvil",count:1b,components:{"minecraft:custom_name":{"text":"升級鍛造台","italic":false,"color":"gold"},"minecraft:lore":[{"text":"第一級: 可鍛造一級屬性 50元","italic":false,"color":"gray"},{"text":"第二級: 可鍛造二級屬性 100元","italic":false,"color":"gray"},{"text":"第三級: 可鍛造三級屬性 150元","italic":false,"color":"gray"}],"minecraft:custom_data":{upgrade:1}}},{Slot:6b,id:"minecraft:armor_stand",count:1b,components:{"minecraft:custom_name":{"text":"升級奴隸","italic":false,"color":"gold"},"minecraft:lore":[{"text":"第一級: 每60秒獲得五元 50元","italic":false,"color":"gray"},{"text":"第二級: 每40秒獲得五元 100元","italic":false,"color":"gray"},{"text":"第三級: 每20秒獲得五元 150元","italic":false,"color":"gray"}],"minecraft:custom_data":{upgrade:1}}},{Slot:7b,id:"minecraft:chest",count:1b,components:{"minecraft:custom_name":{"text":"升級保險箱","italic":false,"color":"gold"},"minecraft:lore":[{"text":"第一級: 9格空間保險箱 50元","italic":false,"color":"gray"},{"text":"第二級: 18格空間保險箱 100元","italic":false,"color":"gray"},{"text":"第三級: 27格空間保險箱 150元","italic":false,"color":"gray"}],"minecraft:custom_data":{upgrade:1}}},{Slot:8b,id:"minecraft:shield",count:1b,components:{"minecraft:custom_name":{"text":"升級守衛","italic":false,"color":"gold"},"minecraft:lore":[{"text":"第一級: 建築物有20秒重生時間 50元","italic":false,"color":"gray"},{"text":"第二級: 建築物有40秒重生時間 100元","italic":false,"color":"gray"},{"text":"第三級: 建築物有60秒重生時間 150元","italic":false,"color":"gray"}],"minecraft:custom_data":{upgrade:1}}}]}