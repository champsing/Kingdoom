execute unless block ~ ~1 ~ blue_shulker_box run function upgrade:chest/blue/reset
execute if score 藍隊保險箱 team_upgrade matches 1 unless block ~ ~1 ~ blue_shulker_box{Items:[{Slot:9b,id:"minecraft:barrier",count:1b},{Slot:10b,id:"minecraft:barrier",count:1b},{Slot:11b,id:"minecraft:barrier",count:1b},{Slot:12b,id:"minecraft:barrier",count:1b},{Slot:13b,id:"minecraft:barrier",count:1b},{Slot:14b,id:"minecraft:barrier",count:1b},{Slot:15b,id:"minecraft:barrier",count:1b},{Slot:16b,id:"minecraft:barrier",count:1b},{Slot:17b,id:"minecraft:barrier",count:1b},{Slot:18b,id:"minecraft:barrier",count:1b},{Slot:19b,id:"minecraft:barrier",count:1b},{Slot:20b,id:"minecraft:barrier",count:1b},{Slot:21b,id:"minecraft:barrier",count:1b},{Slot:22b,id:"minecraft:barrier",count:1b},{Slot:23b,id:"minecraft:barrier",count:1b},{Slot:24b,id:"minecraft:barrier",count:1b},{Slot:25b,id:"minecraft:barrier",count:1b},{Slot:26b,id:"minecraft:barrier",count:1b}]} run function upgrade:chest/lock/1
execute if score 藍隊保險箱 team_upgrade matches 2 unless block ~ ~1 ~ blue_shulker_box{Items:[{Slot:18b,id:"minecraft:barrier",count:1b},{Slot:19b,id:"minecraft:barrier",count:1b},{Slot:20b,id:"minecraft:barrier",count:1b},{Slot:21b,id:"minecraft:barrier",count:1b},{Slot:22b,id:"minecraft:barrier",count:1b},{Slot:23b,id:"minecraft:barrier",count:1b},{Slot:24b,id:"minecraft:barrier",count:1b},{Slot:25b,id:"minecraft:barrier",count:1b},{Slot:26b,id:"minecraft:barrier",count:1b}]} run function upgrade:chest/lock/2
data modify storage chest:blue Items set from block ~ ~1 ~ Items
clear @a[team=red] blaze_rod[custom_data~{lock:"blue"}]
kill @e[type=item,nbt={Item:{id:"minecraft:blaze_rod",components:{"minecraft:custom_data":{lock:"blue"}}}}]
execute as @a[team=blue] store success score @s upgrade_lock run clear @s blaze_rod[custom_data~{lock:"blue"}] 0
give @a[team=blue,scores={upgrade_lock=0}] blaze_rod[custom_name='{"text":"§9藍隊保險箱鑰匙"}',custom_data={upgrade:2,lock:"blue"}]